(function(x,C){typeof exports=="object"&&typeof module<"u"?C(exports):typeof define=="function"&&define.amd?define(["exports"],C):(x=typeof globalThis<"u"?globalThis:x||self,C(x.OSDTextLayer={}))})(this,function(x){"use strict";const C=e=>{var t;return(t=e.bodies.find(o=>o.purpose==="transcribing"))==null?void 0:t.value};var U=(e=>(e.POLYGON="POLYGON",e.RECTANGLE="RECTANGLE",e))(U||{});const re=(e,t)=>t,Se={area:e=>{const{points:t}=e.geometry;let o=0,n=t.length-1;for(let i=0;i<t.length;i++)o+=(t[n][0]+t[i][0])*(t[n][1]-t[i][1]),n=i;return Math.abs(.5*o)},intersects:(e,t,o)=>{const{points:n}=e.geometry;let i=!1;for(let a=0,r=n.length-1;a<n.length;r=a++){const s=n[a][0],l=n[a][1],f=n[r][0],c=n[r][1];l>o!=c>o&&t<(f-s)*(o-l)/(c-l)+s&&(i=!i)}return i}};re(U.POLYGON,Se);const Ee={area:e=>e.geometry.w*e.geometry.h,intersects:(e,t,o)=>t>=e.geometry.x&&t<=e.geometry.x+e.geometry.w&&o>=e.geometry.y&&o<=e.geometry.y+e.geometry.h};re(U.RECTANGLE,Ee),((e=21)=>crypto.getRandomValues(new Uint8Array(e)).reduce((t,o)=>(o&=63,o<36?t+=o.toString(36):o<62?t+=(o-26).toString(36).toUpperCase():o>62?t+="-":t+="_",t),""))();const Le=e=>{const t=[];for(const o of e.querySelectorAll("String")){const n=o.getAttribute("ID"),i=o.getAttribute("CONTENT"),a=parseFloat(o.getAttribute("HPOS")),r=parseFloat(o.getAttribute("VPOS")),s=parseFloat(o.getAttribute("WIDTH")),l=parseFloat(o.getAttribute("HEIGHT")),f=a+s,c=r+l;t.push({id:n,bodies:[{id:n,annotation:n,purpose:"transcribing",value:i}],target:{annotation:n,selector:{type:U.RECTANGLE,geometry:{bounds:{minX:a,minY:r,maxX:f,maxY:c},x:a,y:r,w:s,h:l}}}})}return t},ve=e=>{const t=new DOMParser().parseFromString(e,"application/xml"),o=t.querySelector("Page"),n=[];for(const s of t.querySelectorAll("TextLine"))n.push(...Le(s));const i=o.getAttribute("ID"),a=parseFloat(o.getAttribute("HEIGHT")),r=parseFloat(o.getAttribute("WIDTH"));return{annotations:n,metadata:{id:i,height:a,width:r}}},Ae=[];for(let e=0;e<256;++e)Ae.push((e+256).toString(16).slice(1));typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto);function E(){}function se(e){return e()}function le(){return Object.create(null)}function G(e){e.forEach(se)}function ae(e){return typeof e=="function"}function D(e,t){return e!=e?t==t:e!==t||e&&typeof e=="object"||typeof e=="function"}function xe(e){return Object.keys(e).length===0}function L(e,t){e.appendChild(t)}function A(e,t,o){e.insertBefore(t,o||null)}function v(e){e.parentNode&&e.parentNode.removeChild(e)}function K(e,t){for(let o=0;o<e.length;o+=1)e[o]&&e[o].d(t)}function O(e){return document.createElement(e)}function N(e){return document.createTextNode(e)}function j(){return N("")}function w(e,t,o){o==null?e.removeAttribute(t):e.getAttribute(t)!==o&&e.setAttribute(t,o)}function Oe(e){return Array.from(e.childNodes)}function Q(e,t){t=""+t,e.data!==t&&(e.data=t)}function y(e,t,o){e.classList[o?"add":"remove"](t)}let I;function X(e){I=e}function Ne(){if(!I)throw new Error("Function called outside component initialization");return I}function Pe(e){Ne().$$.on_mount.push(e)}const z=[],$=[];let T=[];const fe=[],Ye=Promise.resolve();let ee=!1;function ze(){ee||(ee=!0,Ye.then(ce))}function te(e){T.push(e)}const ne=new Set;let k=0;function ce(){if(k!==0)return;const e=I;do{try{for(;k<z.length;){const t=z[k];k++,X(t),Te(t.$$)}}catch(t){throw z.length=0,k=0,t}for(X(null),z.length=0,k=0;$.length;)$.pop()();for(let t=0;t<T.length;t+=1){const o=T[t];ne.has(o)||(ne.add(o),o())}T.length=0}while(z.length);for(;fe.length;)fe.pop()();ee=!1,ne.clear(),X(e)}function Te(e){if(e.fragment!==null){e.update(),G(e.before_update);const t=e.dirty;e.dirty=[-1],e.fragment&&e.fragment.p(e.ctx,t),e.after_update.forEach(te)}}function ke(e){const t=[],o=[];T.forEach(n=>e.indexOf(n)===-1?t.push(n):o.push(n)),o.forEach(n=>n()),T=t}const B=new Set;let P;function M(){P={r:0,c:[],p:P}}function R(){P.r||G(P.c),P=P.p}function h(e,t){e&&e.i&&(B.delete(e),e.i(t))}function p(e,t,o,n){if(e&&e.o){if(B.has(e))return;B.add(e),P.c.push(()=>{B.delete(e),n&&(o&&e.d(1),n())}),e.o(t)}else n&&n()}function oe(e){e&&e.c()}function V(e,t,o,n){const{fragment:i,after_update:a}=e.$$;i&&i.m(t,o),n||te(()=>{const r=e.$$.on_mount.map(se).filter(ae);e.$$.on_destroy?e.$$.on_destroy.push(...r):G(r),e.$$.on_mount=[]}),a.forEach(te)}function W(e,t){const o=e.$$;o.fragment!==null&&(ke(o.after_update),G(o.on_destroy),o.fragment&&o.fragment.d(t),o.on_destroy=o.fragment=null,o.ctx=[])}function Ce(e,t){e.$$.dirty[0]===-1&&(z.push(e),ze(),e.$$.dirty.fill(0)),e.$$.dirty[t/31|0]|=1<<t%31}function q(e,t,o,n,i,a,r,s=[-1]){const l=I;X(e);const f=e.$$={fragment:null,ctx:[],props:a,update:E,not_equal:i,bound:le(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(t.context||(l?l.$$.context:[])),callbacks:le(),dirty:s,skip_bound:!1,root:t.target||l.$$.root};r&&r(f.root);let c=!1;if(f.ctx=o?o(e,t.props||{},(u,b,...g)=>{const m=g.length?g[0]:b;return f.ctx&&i(f.ctx[u],f.ctx[u]=m)&&(!f.skip_bound&&f.bound[u]&&f.bound[u](m),c&&Ce(e,u)),b}):[],f.update(),c=!0,G(f.before_update),f.fragment=n?n(f.ctx):!1,t.target){if(t.hydrate){const u=Oe(t.target);f.fragment&&f.fragment.l(u),u.forEach(v)}else f.fragment&&f.fragment.c();t.intro&&h(e.$$.fragment),V(e,t.target,t.anchor,t.customElement),ce()}X(l)}class Z{$destroy(){W(this,1),this.$destroy=E}$on(t,o){if(!ae(o))return E;const n=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return n.push(o),()=>{const i=n.indexOf(o);i!==-1&&n.splice(i,1)}}$set(t){this.$$set&&!xe(t)&&(this.$$.skip_bound=!0,this.$$set(t),this.$$.skip_bound=!1)}}function Ge(e){let t,o,n=e[1].label(e[0])+"",i,a,r;return{c(){t=O("div"),o=O("span"),i=N(n),a=N(" "),w(t,"class","annotation"),w(t,"style",r=`left:${e[8]}px; top:${e[7]}px; width: ${e[4]}px; height: ${e[3]}px; transform: scale(${e[6]}, ${e[5]})`)},m(s,l){A(s,t,l),L(t,o),L(o,i),e[10](o),L(t,a)},p(s,[l]){l&3&&n!==(n=s[1].label(s[0])+"")&&Q(i,n),l&504&&r!==(r=`left:${s[8]}px; top:${s[7]}px; width: ${s[4]}px; height: ${s[3]}px; transform: scale(${s[6]}, ${s[5]})`)&&w(t,"style",r)},i:E,o:E,d(s){s&&v(t),e[10](null)}}}function Ie(e,t,o){let n,i,a,r,s,l,f,c,{annotation:u}=t,{opts:b}=t;function g(m){$[m?"unshift":"push"](()=>{c=m,o(2,c)})}return e.$$set=m=>{"annotation"in m&&o(0,u=m.annotation),"opts"in m&&o(1,b=m.opts)},e.$$.update=()=>{e.$$.dirty&1&&o(9,n=u.target.selector.geometry.bounds),e.$$.dirty&512&&o(8,i=n.minX),e.$$.dirty&512&&o(7,a=n.minY),e.$$.dirty&512&&o(4,r=n.maxX-n.minX),e.$$.dirty&512&&o(3,s=n.maxY-n.minY),e.$$.dirty&20&&o(6,l=c?r/c.offsetWidth:1),e.$$.dirty&12&&o(5,f=c?s/c.offsetHeight:1)},[u,b,c,s,r,f,l,a,i,n,g]}class Xe extends Z{constructor(t){super(),q(this,t,Ie,Ge,D,{annotation:0,opts:1})}}function Me(e){let t,o,n=e[1].label(e[0])+"",i,a;return{c(){t=O("div"),o=O("span"),i=N(n),a=N(" "),w(t,"class","annotation"),w(t,"style",e[2]())},m(r,s){A(r,t,s),L(t,o),L(o,i),L(t,a)},p(r,[s]){s&3&&n!==(n=r[1].label(r[0])+"")&&Q(i,n)},i:E,o:E,d(r){r&&v(t)}}}function Re(e,t,o){let n,{annotation:i}=t,{opts:a}=t;const r=()=>{const s=a.offsetX||0,l=a.offsetY||0;return a.position==="topleft"?`left:${n.minX+s}px; top:${n.minY+l}px;`:`left:${n.minX+s}px; top:${n.maxY+l}px;`};return e.$$set=s=>{"annotation"in s&&o(0,i=s.annotation),"opts"in s&&o(1,a=s.opts)},e.$$.update=()=>{e.$$.dirty&1&&(n=i.target.selector.geometry.bounds)},[i,a,r]}class He extends Z{constructor(t){super(),q(this,t,Re,Me,D,{annotation:0,opts:1})}}function Fe(e){let t,o,n=e[1].label(e[0])+"",i,a,r;return{c(){t=O("div"),o=O("span"),i=N(n),a=N(" "),w(t,"class","annotation"),w(t,"style",r=e[5](e[4],e[3],e[2]))},m(s,l){A(s,t,l),L(t,o),L(o,i),L(t,a)},p(s,[l]){l&3&&n!==(n=s[1].label(s[0])+"")&&Q(i,n),l&28&&r!==(r=s[5](s[4],s[3],s[2]))&&w(t,"style",r)},i:E,o:E,d(s){s&&v(t)}}}function Ue(e,t,o){let n,i,a,{annotation:r}=t,{opts:s}=t,{scale:l}=t,{imageSize:f}=t;const c=(u,b,g)=>{const m=(s.offsetX||0)/g,d=(s.offsetY||0)/g;if(s.position==="topleft"){const S=f[1]-b;return`left:${u+m}px; bottom:${S}px; transform: scale(${1/g})`}else return`left:${u+m}px; top:${b+d}px; transform: scale(${1/g})`};return e.$$set=u=>{"annotation"in u&&o(0,r=u.annotation),"opts"in u&&o(1,s=u.opts),"scale"in u&&o(2,l=u.scale),"imageSize"in u&&o(6,f=u.imageSize)},e.$$.update=()=>{e.$$.dirty&1&&o(7,n=r.target.selector.geometry.bounds),e.$$.dirty&128&&o(4,i=n.minX),e.$$.dirty&130&&o(3,a=s.position==="topleft"?n.minY:n.maxY)},[r,s,l,a,i,c,f,n]}class De extends Z{constructor(t){super(),q(this,t,Ue,Fe,D,{annotation:0,opts:1,scale:2,imageSize:6})}}var Y=(e=>(e.POLYGON="POLYGON",e.RECTANGLE="RECTANGLE",e))(Y||{});const ue=(e,t)=>t,je={area:e=>{const{points:t}=e.geometry;let o=0,n=t.length-1;for(let i=0;i<t.length;i++)o+=(t[n][0]+t[i][0])*(t[n][1]-t[i][1]),n=i;return Math.abs(.5*o)},intersects:(e,t,o)=>{const{points:n}=e.geometry;let i=!1;for(let a=0,r=n.length-1;a<n.length;r=a++){const s=n[a][0],l=n[a][1],f=n[r][0],c=n[r][1];l>o!=c>o&&t<(f-s)*(o-l)/(c-l)+s&&(i=!i)}return i}};ue(Y.POLYGON,je);const Be={area:e=>e.geometry.w*e.geometry.h,intersects:(e,t,o)=>t>=e.geometry.x&&t<=e.geometry.x+e.geometry.w&&o>=e.geometry.y&&o<=e.geometry.y+e.geometry.h};ue(Y.RECTANGLE,Be),((e=21)=>crypto.getRandomValues(new Uint8Array(e)).reduce((t,o)=>(o&=63,o<36?t+=o.toString(36):o<62?t+=(o-26).toString(36).toUpperCase():o>62?t+="-":t+="_",t),""))();const de=e=>new Promise(t=>{var o;if((o=e.world.getItemAt(0))!=null&&o.source){const{x:n,y:i}=e.world.getItemAt(0).source.dimensions;t({width:n,height:i})}else{const n=()=>{const{x:i,y:a}=e.world.getItemAt(0).source.dimensions;e.removeHandler("open",n),t({width:i,height:a})};e.addHandler("open",n)}}),Ve=(e,t,o)=>{const{bounds:n}=e.geometry,i=n.minX*t,a=n.minY*o,r=n.maxX*t,s=n.maxY*o;return e.type===Y.RECTANGLE?{type:Y.RECTANGLE,geometry:{bounds:{minX:i,minY:a,maxX:r,maxY:s},x:i,y:a,w:r-i,h:s-a}}:e.type===Y.POLYGON?{type:Y.POLYGON,geometry:{bounds:{minX:i,minY:a,maxX:r,maxY:s},points:e.geometry.points.map(([l,f])=>[l*t,f*o])}}:(console.error("Unsupported shape type",e),e)},We=(e,t,o)=>{const n=t.width,i=t.height,a=o.width,r=o.height;if(n&&i){const s=a/n,l=r/i;return s===1&&l==1?e:(console.log("[TextLayerExtension] Page and image are different size - scaling annotations"),e.map(f=>({...f,target:{...f.target,selector:Ve(f.target.selector,s,l)}})))}else return console.warn("[TextLayerExtension] Cannot scale annotations without page dimensions"),e};function ge(e,t,o){const n=e.slice();return n[12]=t[o],n}function he(e,t,o){const n=e.slice();return n[12]=t[o],n}function me(e,t,o){const n=e.slice();return n[12]=t[o],n}function pe(e){let t,o,n,i,a;const r=[Je,Ze,qe],s=[];function l(f,c){return f[0].mode==="fixedScreenSize"||!f[0].mode?0:f[0].mode==="fixedPageSize"?1:f[0].mode==="fillBounds"?2:-1}return~(o=l(e))&&(n=s[o]=r[o](e)),{c(){t=O("div"),n&&n.c(),w(t,"style",i=`transform:${e[3]}; width: ${e[6]}px; height: ${e[7]}px`),w(t,"class","a9s-annotationlayer a9s-osd-textlayer"),y(t,"fixed-screen-size",e[0].mode==="fixedScreenSize"||!e[0].mode),y(t,"fixed-page-size",e[0].mode==="fixedPageSize"),y(t,"fill-bounds",e[0].mode==="fillBounds"),y(t,"bottomleft",e[0].position!=="topleft"),y(t,"topleft",e[0].position==="topleft"),y(t,"pointer-events",e[2])},m(f,c){A(f,t,c),~o&&s[o].m(t,null),a=!0},p(f,c){let u=o;o=l(f),o===u?~o&&s[o].p(f,c):(n&&(M(),p(s[u],1,1,()=>{s[u]=null}),R()),~o?(n=s[o],n?n.p(f,c):(n=s[o]=r[o](f),n.c()),h(n,1),n.m(t,null)):n=null),(!a||c&200&&i!==(i=`transform:${f[3]}; width: ${f[6]}px; height: ${f[7]}px`))&&w(t,"style",i),(!a||c&1)&&y(t,"fixed-screen-size",f[0].mode==="fixedScreenSize"||!f[0].mode),(!a||c&1)&&y(t,"fixed-page-size",f[0].mode==="fixedPageSize"),(!a||c&1)&&y(t,"fill-bounds",f[0].mode==="fillBounds"),(!a||c&1)&&y(t,"bottomleft",f[0].position!=="topleft"),(!a||c&1)&&y(t,"topleft",f[0].position==="topleft"),(!a||c&4)&&y(t,"pointer-events",f[2])},i(f){a||(h(n),a=!0)},o(f){p(n),a=!1},d(f){f&&v(t),~o&&s[o].d()}}}function qe(e){let t,o,n=e[5],i=[];for(let r=0;r<n.length;r+=1)i[r]=_e(ge(e,n,r));const a=r=>p(i[r],1,1,()=>{i[r]=null});return{c(){for(let r=0;r<i.length;r+=1)i[r].c();t=j()},m(r,s){for(let l=0;l<i.length;l+=1)i[l]&&i[l].m(r,s);A(r,t,s),o=!0},p(r,s){if(s&33){n=r[5];let l;for(l=0;l<n.length;l+=1){const f=ge(r,n,l);i[l]?(i[l].p(f,s),h(i[l],1)):(i[l]=_e(f),i[l].c(),h(i[l],1),i[l].m(t.parentNode,t))}for(M(),l=n.length;l<i.length;l+=1)a(l);R()}},i(r){if(!o){for(let s=0;s<n.length;s+=1)h(i[s]);o=!0}},o(r){i=i.filter(Boolean);for(let s=0;s<i.length;s+=1)p(i[s]);o=!1},d(r){K(i,r),r&&v(t)}}}function Ze(e){let t,o,n=e[5],i=[];for(let r=0;r<n.length;r+=1)i[r]=ye(he(e,n,r));const a=r=>p(i[r],1,1,()=>{i[r]=null});return{c(){for(let r=0;r<i.length;r+=1)i[r].c();t=j()},m(r,s){for(let l=0;l<i.length;l+=1)i[l]&&i[l].m(r,s);A(r,t,s),o=!0},p(r,s){if(s&33){n=r[5];let l;for(l=0;l<n.length;l+=1){const f=he(r,n,l);i[l]?(i[l].p(f,s),h(i[l],1)):(i[l]=ye(f),i[l].c(),h(i[l],1),i[l].m(t.parentNode,t))}for(M(),l=n.length;l<i.length;l+=1)a(l);R()}},i(r){if(!o){for(let s=0;s<n.length;s+=1)h(i[s]);o=!0}},o(r){i=i.filter(Boolean);for(let s=0;s<i.length;s+=1)p(i[s]);o=!1},d(r){K(i,r),r&&v(t)}}}function Je(e){let t,o,n=e[5],i=[];for(let r=0;r<n.length;r+=1)i[r]=be(me(e,n,r));const a=r=>p(i[r],1,1,()=>{i[r]=null});return{c(){for(let r=0;r<i.length;r+=1)i[r].c();t=j()},m(r,s){for(let l=0;l<i.length;l+=1)i[l]&&i[l].m(r,s);A(r,t,s),o=!0},p(r,s){if(s&241){n=r[5];let l;for(l=0;l<n.length;l+=1){const f=me(r,n,l);i[l]?(i[l].p(f,s),h(i[l],1)):(i[l]=be(f),i[l].c(),h(i[l],1),i[l].m(t.parentNode,t))}for(M(),l=n.length;l<i.length;l+=1)a(l);R()}},i(r){if(!o){for(let s=0;s<n.length;s+=1)h(i[s]);o=!0}},o(r){i=i.filter(Boolean);for(let s=0;s<i.length;s+=1)p(i[s]);o=!1},d(r){K(i,r),r&&v(t)}}}function _e(e){let t,o;return t=new Xe({props:{annotation:e[12],opts:e[0]}}),{c(){oe(t.$$.fragment)},m(n,i){V(t,n,i),o=!0},p(n,i){const a={};i&32&&(a.annotation=n[12]),i&1&&(a.opts=n[0]),t.$set(a)},i(n){o||(h(t.$$.fragment,n),o=!0)},o(n){p(t.$$.fragment,n),o=!1},d(n){W(t,n)}}}function ye(e){let t,o;return t=new He({props:{annotation:e[12],opts:e[0]}}),{c(){oe(t.$$.fragment)},m(n,i){V(t,n,i),o=!0},p(n,i){const a={};i&32&&(a.annotation=n[12]),i&1&&(a.opts=n[0]),t.$set(a)},i(n){o||(h(t.$$.fragment,n),o=!0)},o(n){p(t.$$.fragment,n),o=!1},d(n){W(t,n)}}}function be(e){let t,o;return t=new De({props:{annotation:e[12],opts:e[0],imageSize:[e[6],e[7]],scale:e[4]}}),{c(){oe(t.$$.fragment)},m(n,i){V(t,n,i),o=!0},p(n,i){const a={};i&32&&(a.annotation=n[12]),i&1&&(a.opts=n[0]),i&192&&(a.imageSize=[n[6],n[7]]),i&16&&(a.scale=n[4]),t.$set(a)},i(n){o||(h(t.$$.fragment,n),o=!0)},o(n){p(t.$$.fragment,n),o=!1},d(n){W(t,n)}}}function Ke(e){let t,o,n=e[1]&&pe(e);return{c(){n&&n.c(),t=j()},m(i,a){n&&n.m(i,a),A(i,t,a),o=!0},p(i,[a]){i[1]?n?(n.p(i,a),a&2&&h(n,1)):(n=pe(i),n.c(),h(n,1),n.m(t.parentNode,t)):n&&(M(),p(n,1,1,()=>{n=null}),R())},i(i){o||(h(n),o=!0)},o(i){p(n),o=!1},d(i){n&&n.d(i),i&&v(t)}}}function Qe(e,t,o){let{state:n}=t,{viewer:i}=t,{opts:a}=t,{visible:r=!0}=t,{captureEvents:s=!1}=t;const{store:l}=n;let f,c,u=[],b,g;const m=()=>{const d=i.viewport.viewportToImageRectangle(i.viewport.getBounds(!0)),S=i.viewport.getContainerSize().x,ie=i.viewport.getZoom(!0);o(4,c=ie*S/i.world.getContentFactor());const _=Math.PI*i.viewport.getRotation()/180,J=-d.x*c,we=-d.y*c;let H,F;_>0&&_<=Math.PI/2?(H=d.height*c,F=0):_>Math.PI/2&&_<=Math.PI?(H=d.width*c,F=d.height*c):_>Math.PI&&_<=Math.PI*1.5?(H=0,F=d.width*c):(H=0,F=0);const tt=H+J*Math.cos(_)-we*Math.sin(_),nt=F+J*Math.sin(_)+we*Math.cos(_);o(3,f=`translate(${tt}px, ${nt}px) rotate(${_}) scale(${c})`)};return Pe(()=>{de(i).then(S=>{o(6,b=S.width),o(7,g=S.height)}),i.addHandler("update-viewport",m);const d=S=>{o(5,u=S.state),m()};return l.observe(d),()=>{i.removeHandler("update-viewport",m),l.unobserve(d)}}),e.$$set=d=>{"state"in d&&o(8,n=d.state),"viewer"in d&&o(9,i=d.viewer),"opts"in d&&o(0,a=d.opts),"visible"in d&&o(1,r=d.visible),"captureEvents"in d&&o(2,s=d.captureEvents)},[a,r,s,f,c,u,b,g,n,i]}class $e extends Z{constructor(t){super(),q(this,t,Qe,Ke,D,{state:8,viewer:9,opts:0,visible:1,captureEvents:2})}}const rt="",et=(e,t)=>{const{viewer:o,state:n}=e;let i=!0,a=!1;const r=new $e({target:o.element.querySelector(".openseadragon-canvas"),props:{state:n,viewer:o,opts:t}});return{isLocked:()=>a,isVisible:()=>i,loadOCR:(g,m="ALTO")=>fetch(g).then(d=>d.text()).then(d=>{const{annotations:S,metadata:ie}=ve(d);de(o).then(_=>{const J=We(S,ie,_);e.setAnnotations(J)})}),setLocked:g=>{a=g,o.setMouseNavEnabled(!g),r.$$set({captureEvents:g})},setVisible:g=>{i=g,r.$$set({visible:g})},unmount:()=>r.$destroy()}};x.mountExtension=et,x.transcriptionLabel=C,Object.defineProperty(x,Symbol.toStringTag,{value:"Module"})});
//# sourceMappingURL=annotorious-openseadragon-textlayer.js.map
